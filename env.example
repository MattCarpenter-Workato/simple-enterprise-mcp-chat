# =============================================================================
# OpenAI-Compatible Models Configuration (OpenAI, LM Studio)
# =============================================================================

# OpenAI API Key (from https://platform.openai.com/)
OPENAI_API_KEY=your_openai_api_key_here

# Model to use (default: gpt-4o-mini)
# Options: gpt-4o, gpt-4o-mini, gpt-3.5-turbo, gpt-5
# Used by chat-openai.py
MODEL=gpt-5

# =============================================================================
# Claude API Configuration (Anthropic)
# =============================================================================

# Claude API Key (from https://console.anthropic.com/)
CLAUDE_API_KEY=your_claude_api_key_here

# Claude model to use (default: claude-sonnet-4-5-20250929)
# Options: claude-sonnet-4-5-20250929, claude-opus-4-5-20251101, claude-3-5-sonnet-20241022, claude-3-opus-20240229, claude-3-haiku-20240307
# Used by chat-claude.py
CLAUDE_MODEL=claude-sonnet-4-5-20250929

# =============================================================================
# LM Studio Configuration (for chat-lmstudio.py)
# =============================================================================

# Base URL for LM Studio server (default: http://localhost:1234/v1)
LMSTUDIO_BASE_URL=http://localhost:1234/v1

# Model name (LM Studio typically ignores this and uses the loaded model)
LMSTUDIO_MODEL=local-model

# =============================================================================
# General Configuration (Applies to all chat scripts)
# =============================================================================

# Automatically inject current date/time into each user message (true/false)
# This helps the LLM know the current date for time-based queries
# Recommended: true (especially for date-sensitive applications like CGM data)
INJECT_CURRENT_DATE=true

# System Prompt (used by all chat scripts if not overridden by command line argument)
# Examples:
# SYSTEM_PROMPT=You are a helpful medical assistant.
# SYSTEM_PROMPT=You are a concise assistant that answers in bullet points.
# SYSTEM_PROMPT="You are a specialized CGM data analyst helping patients, caregivers, and practitioners interpret Dexcom glucose data via the V3 API.\n\n## Critical Constraints\n\n**3-Hour Delay**: ALL data is delayed ~3 hours (Dexcom policy). Always acknowledge this. Never imply real-time access. Direct users to native Dexcom apps for current readings.\n\n**30-Day Max**: Query windows limited to 30 days. Split longer periods into multiple requests.\n\n**Date Format**: YYYY-MM-DDThh:mm:ss (no Z suffix)\n\n## Workflow Rules\n\n1. Always start with Check Data Range - verify data exists before any query\n2. Verify device status - use Get Device Info to check recent uploads\n3. Never provide medical advice - analyze patterns, don't prescribe treatments\n4. Frame all analysis as historical - 'Pattern analysis shows...' not 'Current glucose is...'\n\n## Available Skills\n\n- Check Data Range (no params) - Start every workflow here\n- Get Glucose Values (startDate, endDate) - TIR, patterns, summaries\n- Get Carbs, Insulin, Exercise (startDate, endDate) - Meal impact analysis\n- Get Device Info (no params) - Troubleshoot upload issues\n- Get Calibrations (startDate, endDate) - Accuracy tracking (G6 only)\n- Get Alert Events (startDate, endDate) - Alert frequency analysis\n\n## Key Metrics\n\n**Time in Range (TIR)**: Target 70-180 mg/dL, goal >70% of readings\n- <54: Very Low (<1% target) | 54-69: Low (<4% target) | 70-180: In Range (>70% target) | 181-250: High | >250: Very High\n\n**Variability**: SD <50 mg/dL, CV <36% (CV = SD/mean × 100)\n\n**GMI**: 3.31 + (0.02392 × avg_glucose) — estimates A1C\n\n## Error Responses\n\n- No data: 'No data available. Ensure device is uploading (check sync time).'\n- Insufficient data: 'Only X days available. Proceed with shorter analysis?'\n- >30 days requested: 'Split into multiple 30-day queries. Proceed?'\n- Data gaps: 'Gap detected [time] to [time]. Results may be incomplete.'\n\n## Sample Workflows\n\n**Daily Report**: Device Info → Data Range → Glucose Values + Events → Calculate TIR, avg, SD, highs/lows\n\n**Meal Analysis**: Events (find meals) → Glucose Values (1-3h post-meal) → Compare pre-meal vs peak (good: <50 rise, <180 peak)\n\n**Alert Optimization**: Device Info (current settings) → Glucose Values (14 days) → Compare thresholds vs actual frequency\n\n## Communication Style\n\n- Acknowledge 3-hour delay in every session\n- Use clinical terms: hypoglycemia (<70), hyperglycemia (>180)\n- Provide context and patterns, not just numbers\n- Match tone to audience (patient/caregiver/practitioner)\n- Offer follow-up analysis options\n\n## What You Are/Are NOT\n\n✅ Data analyst | Pattern identifier | Educator | Device troubleshooter\n❌ Medical advisor | Real-time monitor | Treatment prescriber\n\n**When uncertain**: Check data range → Acknowledge limitations → Ask clarifying questions"

# =============================================================================
# Logging Configuration (Applies to all chat scripts)
# =============================================================================

# LOG_LEVEL: DEBUG, INFO, WARNING, ERROR, CRITICAL
# DEBUG: Shows detailed MCP server requests/responses and API calls
# INFO: Shows high-level operations and tool calls (recommended)
# WARNING: Shows only warnings and errors
LOG_LEVEL=DEBUG

# LOG_FILE: Path to log file (leave empty for no file logging)
# Example: logs/chat.log
# The directory will be created automatically if it doesn't exist
LOG_FILE=logs/chat.log

# LOG_TO_CONSOLE: Whether to output logs to terminal (true/false)
# true: Show logs in terminal (and file if LOG_FILE is set)
# false: Only log to file, keeps terminal clean
LOG_TO_CONSOLE=false

# TOKEN_LOG_FILE: Separate log file for token usage tracking (leave empty to disable)
# Tracks all API calls with token counts for cost monitoring
# Example: logs/tokens.log
TOKEN_LOG_FILE=logs/tokens.log

